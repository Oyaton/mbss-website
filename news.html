
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Events - Monsignor Bala Secondary School</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <!-- Inline styles to ensure colors are applied -->
    <style>
        body {
            background-color: #d8a7a7 !important; /* Light maroon */
        }
        #site-header {
            background-color: #87ceeb !important; /* Sky blue */
        }
        .bg-white {
            background-color: #d8a7a7 !important; /* Light maroon */
        }
        .bg-light {
            background-color: #e6c3c3 !important; /* Lighter maroon */
        }
        .card {
            background-color: #f0d9d9 !important; /* Very light maroon */
        }

        /* Hero Section Enhancements */
        .page-hero {
            position: relative;
            min-height: 500px;
        }

        .hero-content {
            animation: fadeInUp 1s ease-out;
        }

        .hero-thumbnails .thumbnail-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .hero-thumbnails .thumbnail-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .carousel-fade .carousel-item {
            opacity: 0;
            transition-duration: 1s;
            transition-property: opacity;
        }

        .carousel-fade .carousel-item.active {
            opacity: 1;
        }

        .carousel-caption {
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .page-hero {
                min-height: 400px;
            }

            .hero-content h1 {
                font-size: 2.5rem !important;
            }
        }
    </style>
</head>
<body style="background-color: #d8a7a7;">
    <!-- Header -->
    <header id="site-header" style="background-color: #87ceeb;">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand fw-bold d-flex align-items-center" href="index.html">
                    <img src="gallery/MBSS logo.jpg" alt="MBSS Logo" class="me-2 logo" style="width: 85px; height: 85px;" />
                    MBSS
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                        <li class="nav-item"><a class="nav-link" href="academics.html">Academics</a></li>
                        <li class="nav-item"><a class="nav-link" href="admissions.html">Admissions</a></li>
                        <li class="nav-item"><a class="nav-link" href="student-life.html">Student Life</a></li>
                        <li class="nav-item"><a class="nav-link" href="alumni.html">Alumni</a></li>
                        <li class="nav-item"><a class="nav-link active" href="news.html">News & Events</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Hero with Image Carousel -->
    <section class="page-hero d-flex align-items-center position-relative" style="height: 500px; overflow: hidden;">
        <!-- Background Image Carousel -->
        <div id="heroCarousel" class="carousel slide carousel-fade position-absolute w-100 h-100" data-bs-ride="carousel" data-bs-interval="4000">
            <div class="carousel-inner h-100">
                <div class="carousel-item active h-100">
                    <img src="gallery/20250712_151344.jpg" class="w-100 h-100 object-fit-cover" alt="Science Competition Success">
                    <div class="carousel-caption d-none d-md-block position-absolute bottom-0 start-0 text-start p-3">
                        <small class="badge bg-success mb-1">Latest Achievement</small>
                        <h6 class="text-white mb-0">Regional Science Competition Winners</h6>
                    </div>
                </div>
                <div class="carousel-item h-100">
                    <img src="gallery/20250721_112507.jpg" class="w-100 h-100 object-fit-cover" alt="School Team Sports">
                    <div class="carousel-caption d-none d-md-block position-absolute bottom-0 start-0 text-start p-3">
                        <small class="badge bg-warning mb-1">Team Sports</small>
                        <h6 class="text-white mb-0">Inter-House Competition Teams</h6>
                    </div>
                </div>
                <div class="carousel-item h-100">
                    <img src="gallery/20250717_102419.jpg" class="w-100 h-100 object-fit-cover" alt="Annual Science Fair">
                    <div class="carousel-caption d-none d-md-block position-absolute bottom-0 start-0 text-start p-3">
                        <small class="badge bg-info mb-1">Upcoming Event</small>
                        <h6 class="text-white mb-0">Annual Science Fair 2025</h6>
                    </div>
                </div>
                <div class="carousel-item h-100">
                    <img src="gallery/IMG_20250614_151733_602.jpg" class="w-100 h-100 object-fit-cover" alt="Music Festival">
                    <div class="carousel-caption d-none d-md-block position-absolute bottom-0 start-0 text-start p-3">
                        <small class="badge bg-warning mb-1">Cultural Event</small>
                        <h6 class="text-white mb-0">Annual Music Festival</h6>
                    </div>
                </div>
            </div>

            <!-- Carousel Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>

            <!-- Carousel Indicators -->
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
            </div>
        </div>

        <!-- Dark Overlay -->
        <div class="position-absolute w-100 h-100" style="background: linear-gradient(135deg, rgba(0,0,0,0.6), rgba(0,0,0,0.3)); z-index: 1;"></div>

        <!-- Hero Content -->
        <div class="container position-relative" style="z-index: 2;">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <div class="hero-content">
                        <h1 class="text-white fw-bold display-4 mb-3">
                            <span class="d-block">News & Events</span>
                            <small class="fs-3 text-light opacity-75">Stay Connected with MBSS</small>
                        </h1>
                        <p class="text-white lead mb-4">Stay updated with the latest news, upcoming events, and exciting announcements from Monsignor Bala Secondary School</p>

                        <!-- Quick Stats -->
                        <div class="row g-3 mb-4">
                            <div class="col-auto">
                                <div class="d-flex align-items-center text-white">
                                    <i class="fas fa-newspaper me-2 text-warning"></i>
                                    <div>
                                        <div class="fw-bold">12+</div>
                                        <small class="opacity-75">Latest News</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="d-flex align-items-center text-white">
                                    <i class="fas fa-calendar-alt me-2 text-info"></i>
                                    <div>
                                        <div class="fw-bold">5+</div>
                                        <small class="opacity-75">Upcoming Events</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="d-flex align-items-center text-white">
                                    <i class="fas fa-bullhorn me-2 text-success"></i>
                                    <div>
                                        <div class="fw-bold">8+</div>
                                        <small class="opacity-75">Announcements</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-3 flex-wrap">
                            <a href="#latest-news" class="btn btn-primary btn-lg">
                                <i class="fas fa-newspaper me-2"></i>Latest News
                            </a>
                            <a href="#upcoming-events" class="btn btn-outline-light btn-lg">
                                <i class="fas fa-calendar me-2"></i>View Events
                            </a>
                            <button class="btn btn-outline-light btn-lg" onclick="document.getElementById('newsletterForm').scrollIntoView()">
                                <i class="fas fa-envelope me-2"></i>Subscribe
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Side Image Thumbnails -->
                <div class="col-lg-4 d-none d-lg-block">
                    <div class="hero-thumbnails">
                        <h6 class="text-white mb-3"><i class="fas fa-images me-2"></i>Recent Highlights</h6>
                        <div class="row g-2">
                            <div class="col-6">
                                <div class="thumbnail-card position-relative">
                                    <img src="gallery/20250721_113824.jpg" class="img-fluid rounded" style="height: 100px; width: 100%; object-fit: cover;" alt="Environmental Project">
                                    <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-2 rounded-bottom">
                                        <small>Environmental Project</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="thumbnail-card position-relative">
                                    <img src="gallery/20250712_151832.jpg" class="img-fluid rounded" style="height: 100px; width: 100%; object-fit: cover;" alt="New Computer Lab">
                                    <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-2 rounded-bottom">
                                        <small>Computer Lab</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="thumbnail-card position-relative">
                                    <img src="gallery/20250721_112107.jpg" class="img-fluid rounded" style="height: 100px; width: 100%; object-fit: cover;" alt="Cultural Day">
                                    <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-2 rounded-bottom">
                                        <small>Cultural Day</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="thumbnail-card position-relative">
                                    <img src="gallery/20241106_105722.jpg" class="img-fluid rounded" style="height: 100px; width: 100%; object-fit: cover;" alt="Community Service">
                                    <div class="position-absolute bottom-0 start-0 end-0 bg-dark bg-opacity-75 text-white p-2 rounded-bottom">
                                        <small>Community Service</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Console Debug Panel (temporary) -->
    <div id="debug-panel" class="position-fixed" style="top: 10px; right: 10px; z-index: 2000; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 5px; font-size: 12px; max-width: 300px;">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <strong>üîß Debug Panel</strong>
            <button onclick="document.getElementById('debug-panel').style.display='none'" class="btn btn-sm btn-outline-light">√ó</button>
        </div>
        <div id="debug-status">Loading...</div>
        <div class="mt-2">
            <button onclick="window.fixConsole()" class="btn btn-sm btn-warning me-1">Fix Console</button>
            <button onclick="window.emergencyChat()" class="btn btn-sm btn-success me-1">Test Chat</button>
            <button onclick="window.testChatbot()" class="btn btn-sm btn-info">Debug Chat</button>
        </div>
    </div>

    <!-- Interactive Chatbot -->
    <div id="chatbot-container" class="position-fixed" style="bottom: 80px; right: 20px; z-index: 1050;">
        <!-- Chatbot Toggle Button -->
        <button id="chatbot-toggle" class="btn btn-primary rounded-circle shadow-lg" style="width: 60px; height: 60px; position: relative;">
            <i class="fas fa-comments fa-lg"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="chatbot-notification" style="display: none;">
                1
            </span>
        </button>

        <!-- Chatbot Window -->
        <div id="chatbot-window" class="card shadow-lg" style="width: 350px; height: 500px; display: none; margin-bottom: 10px;">
            <!-- Chatbot Header -->
            <div class="card-header bg-primary text-white d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                    <img src="gallery/MBSS logo.jpg" alt="MBSS" class="rounded-circle me-2" style="width: 30px; height: 30px; object-fit: cover;">
                    <div>
                        <h6 class="mb-0">MBSS Assistant</h6>
                        <small class="opacity-75">Online now</small>
                    </div>
                </div>
                <button id="chatbot-close" class="btn btn-sm text-white p-0">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Chatbot Messages -->
            <div id="chatbot-messages" class="card-body p-3" style="height: 350px; overflow-y: auto; background: #f8f9fa;">
                <!-- Welcome message will be added here -->
            </div>

            <!-- Quick Actions -->
            <div class="px-3 py-2 border-top bg-white">
                <div class="d-flex gap-1 flex-wrap" id="quick-actions">
                    <button class="btn btn-outline-primary btn-sm quick-action" data-action="admissions">üìö Admissions</button>
                    <button class="btn btn-outline-primary btn-sm quick-action" data-action="fees">üí∞ Fees</button>
                    <button class="btn btn-outline-primary btn-sm quick-action" data-action="contact">üìû Contact</button>
                    <button class="btn btn-outline-primary btn-sm quick-action" data-action="events">üéâ Events</button>
                </div>
            </div>

            <!-- Chatbot Input -->
            <div class="card-footer p-3">
                <div class="input-group">
                    <input type="text" id="chatbot-input" class="form-control" placeholder="Type your message..." maxlength="500">
                    <button id="chatbot-send" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <small class="text-muted d-block mt-1">
                    <i class="fas fa-shield-alt me-1"></i>Your messages are sent directly to our school administration
                </small>
            </div>
        </div>
    </div>

    <!-- News & Events Content -->
    <section class="py-5 bg-white">
        <div class="container py-4">
            <!-- Filter Tabs -->
            <div class="text-center mb-5">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-outline-primary active" data-filter="all">All</button>
                    <button type="button" class="btn btn-outline-primary" data-filter="news">News</button>
                    <button type="button" class="btn btn-outline-primary" data-filter="events">Events</button>
                    <button type="button" class="btn btn-outline-primary" data-filter="announcements">Announcements</button>
                </div>
            </div>

            <div class="row g-4">
                <!-- Featured News -->
                <div class="col-lg-8">
                    <div class="card news-card featured mb-4">
                        <div class="position-relative">
                            <img src="gallery/20250712_151344.jpg" class="card-img-top" alt="Science Competition" style="height: 300px; object-fit: cover;">
                            <div class="position-absolute top-0 start-0 m-3">
                                <span class="badge bg-danger fs-6">üèÜ FEATURED</span>
                            </div>
                            <div class="position-absolute bottom-0 start-0 end-0 bg-gradient" style="background: linear-gradient(transparent, rgba(0,0,0,0.7)); height: 100px;"></div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <span class="badge bg-success me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>June 10, 2025</small>
                                <span class="ms-auto">
                                    <i class="fas fa-eye me-1"></i>
                                    <small class="text-muted">1,247 views</small>
                                </span>
                            </div>
                            <h3 class="card-title">School Wins Regional Science Competition</h3>
                            <p class="card-text">Our students demonstrated exceptional talent and innovation at the regional science competition, bringing home the first-place trophy. The team's project on renewable energy solutions impressed judges and showcased the quality of education at MBSS.</p>

                            <!-- Image Gallery Preview -->
                            <div class="mb-3">
                                <h6 class="text-muted mb-2"><i class="fas fa-images me-1"></i>Competition Highlights</h6>
                                <div class="d-flex gap-2 flex-wrap">
                                    <img src="gallery/20250712_151346.jpg" class="rounded" style="width: 80px; height: 60px; object-fit: cover; cursor: pointer;" alt="Competition 1" title="Project Presentation" onclick="showImageModal(this.src, 'Project Presentation')">
                                    <img src="gallery/20250712_151437.jpg" class="rounded" style="width: 80px; height: 60px; object-fit: cover; cursor: pointer;" alt="Competition 2" title="Team at Work" onclick="showImageModal(this.src, 'Team at Work')">
                                    <img src="gallery/20250712_151438.jpg" class="rounded" style="width: 80px; height: 60px; object-fit: cover; cursor: pointer;" alt="Competition 3" title="Award Ceremony" onclick="showImageModal(this.src, 'Award Ceremony')">
                                    <img src="gallery/20250712_151447.jpg" class="rounded" style="width: 80px; height: 60px; object-fit: cover; cursor: pointer;" alt="Competition 4" title="Innovation Display" onclick="showImageModal(this.src, 'Innovation Display')">
                                    <div class="d-flex align-items-center justify-content-center bg-light rounded" style="width: 80px; height: 60px; cursor: pointer;" onclick="showAllImages()">
                                        <small class="text-muted">+5 more</small>
                                    </div>
                                </div>
                            </div>

                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-primary">
                                    <i class="fas fa-book-open me-1"></i>Read Full Story
                                </a>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="shareNews('science-competition')">
                                        <i class="fas fa-share-alt me-1"></i>Share
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-bookmark me-1"></i>Save
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-calendar-alt me-2"></i>Upcoming Events</h5>
                        </div>
                        <div class="card-body">
                            <div class="event-item mb-3">
                                <div class="d-flex">
                                    <div class="date-box bg-primary text-white text-center me-3">
                                        <div class="day">15</div>
                                        <div class="month">JUL</div>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Annual Sports Day</h6>
                                        <small class="text-muted">9:00 AM - 4:00 PM</small>
                                    </div>
                                </div>
                            </div>
                            <div class="event-item mb-3">
                                <div class="d-flex">
                                    <div class="date-box bg-success text-white text-center me-3">
                                        <div class="day">22</div>
                                        <div class="month">JUL</div>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Parent-Teacher Conference</h6>
                                        <small class="text-muted">2:00 PM - 5:00 PM</small>
                                    </div>
                                </div>
                            </div>
                            <div class="event-item">
                                <div class="d-flex">
                                    <div class="date-box bg-warning text-white text-center me-3">
                                        <div class="day">05</div>
                                        <div class="month">AUG</div>
                                    </div>
                                    <div>
                                        <h6 class="mb-1">Science Fair</h6>
                                        <small class="text-muted">10:00 AM - 3:00 PM</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- News Grid -->
            <div class="row g-4 mt-4">
                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250712_151832.jpg" class="card-img-top" alt="Computer Lab">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üì± Technology</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-info me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>May 28, 2025</small>
                            </div>
                            <h5 class="card-title">New Computer Lab Inaugurated</h5>
                            <p class="card-text">The state-of-the-art computer lab was inaugurated last week, enhancing our technological capabilities...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250712_151840.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Lab view 1" title="Computer Lab Interior">
                                    <img src="gallery/20250712_151846.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Lab view 2" title="Students at Work">
                                    <img src="gallery/20250712_151853.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Lab view 3" title="Modern Equipment">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250721_112507.jpg" class="card-img-top" alt="School Team Sports Day">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üèÉ‚Äç‚ôÇÔ∏è Team Sports</span>
                            </div>
                            <div class="position-absolute top-0 start-0 m-2">
                                <span class="badge bg-success">üèÜ Inter-House</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-primary me-2">Event</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>July 15, 2025</small>
                            </div>
                            <h5 class="card-title">Annual Sports Day 2025</h5>
                            <p class="card-text">Join us for our annual sports day featuring various competitions and activities for all students. Watch our house teams compete in exciting inter-house competitions...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Learn More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250721_112511.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Team 1" title="Red House Team">
                                    <img src="gallery/20250721_112519.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Team 2" title="Blue House Team">
                                    <img src="gallery/20250721_112523.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Team 3" title="Green House Team">
                                    <img src="gallery/20250721_112553.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Team 4" title="Yellow House Team">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250712_151926.jpg" class="card-img-top" alt="Academic Excellence">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üèÜ Awards</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-warning me-2">Announcement</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>June 1, 2025</small>
                            </div>
                            <h5 class="card-title">Academic Excellence Awards</h5>
                            <p class="card-text">Congratulations to our outstanding students who received academic excellence awards this term...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">View Details</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250712_151926_1.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Awards 1" title="Award Ceremony">
                                    <img src="gallery/20250712_151914.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Awards 2" title="Top Students">
                                    <img src="gallery/20250712_151858.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Awards 3" title="Recognition">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional News Items -->
                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250721_111727.jpg" class="card-img-top" alt="Student Leadership">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üë• Leadership</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-success me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>July 21, 2025</small>
                            </div>
                            <h5 class="card-title">Student Leadership Training</h5>
                            <p class="card-text">Our student leaders participated in an intensive leadership development program...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250721_111740.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Leadership 1" title="Training Session">
                                    <img src="gallery/20250721_111743.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Leadership 2" title="Group Activities">
                                    <img src="gallery/20250721_111748.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Leadership 3" title="Team Building">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250717_102419.jpg" class="card-img-top" alt="Science Fair">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üî¨ Science</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-primary me-2">Event</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>August 5, 2025</small>
                            </div>
                            <h5 class="card-title">Annual Science Fair</h5>
                            <p class="card-text">Students showcase their innovative science projects and experiments...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Learn More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250717_102427.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Science 1" title="Experiments">
                                    <img src="gallery/20250717_102428.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Science 2" title="Projects">
                                    <img src="gallery/20250717_102455.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Science 3" title="Innovation">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20241106_105722.jpg" class="card-img-top" alt="Community Service">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">ü§ù Community</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-info me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>November 6, 2024</small>
                            </div>
                            <h5 class="card-title">Community Service Initiative</h5>
                            <p class="card-text">Students engage in community service activities to give back to society...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20241106_105738.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Service 1" title="Community Work">
                                    <img src="gallery/20241106_105827.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Service 2" title="Helping Others">
                                    <img src="gallery/20241106_110021.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Service 3" title="Volunteer Work">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250721_112107.jpg" class="card-img-top" alt="Cultural Day">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üé≠ Culture</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-warning me-2">Event</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>September 12, 2025</small>
                            </div>
                            <h5 class="card-title">Cultural Diversity Day</h5>
                            <p class="card-text">Celebrating the rich cultural heritage of our diverse student body...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Learn More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250721_112117.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Culture 1" title="Traditional Dance">
                                    <img src="gallery/20250721_112203.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Culture 2" title="Cultural Display">
                                    <img src="gallery/20250721_112251.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Culture 3" title="Heritage Show">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250721_113824.jpg" class="card-img-top" alt="Environmental Club">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üå± Environment</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-success me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>June 15, 2025</small>
                            </div>
                            <h5 class="card-title">Environmental Conservation Project</h5>
                            <p class="card-text">Our environmental club launches tree planting and conservation initiatives...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250721_113827.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Environment 1" title="Tree Planting">
                                    <img src="gallery/20250721_113914.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Environment 2" title="Conservation">
                                    <img src="gallery/20250721_114007.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Environment 3" title="Green Initiative">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/IMG_20250614_151733_602.jpg" class="card-img-top" alt="Music Festival">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üéµ Music</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-info me-2">Event</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>June 14, 2025</small>
                            </div>
                            <h5 class="card-title">Annual Music Festival</h5>
                            <p class="card-text">Students showcase their musical talents in our annual music festival...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Learn More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/IMG_20250614_151837_345.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Music 1" title="Performance">
                                    <img src="gallery/IMG_20250614_152345_533.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Music 2" title="Choir">
                                    <img src="gallery/IMG_20250614_170037_263.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Music 3" title="Instruments">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20230804_164016.jpg" class="card-img-top" alt="Alumni Reunion">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üéì Alumni</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-warning me-2">Event</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>August 4, 2023</small>
                            </div>
                            <h5 class="card-title">Alumni Reunion 2023</h5>
                            <p class="card-text">Former students gather to reconnect and share their success stories...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">View Details</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20230804_164034.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Alumni 1" title="Reunion Gathering">
                                    <img src="gallery/IMG_20230804_151645.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Alumni 2" title="Success Stories">
                                    <img src="gallery/IMG_20230804_153434.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Alumni 3" title="Networking">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/compound.jpg" class="card-img-top" alt="School Infrastructure">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üèóÔ∏è Infrastructure</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-success me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>May 1, 2025</small>
                            </div>
                            <h5 class="card-title">Infrastructure Development</h5>
                            <p class="card-text">New developments in school infrastructure to enhance learning environment...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250712_150923.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Building 1" title="New Classrooms">
                                    <img src="gallery/20250712_150924.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Building 2" title="Modern Facilities">
                                    <img src="gallery/20250712_150944.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Building 3" title="Campus Development">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional News Items with More Images -->
                <div class="col-md-6 col-lg-4">
                    <div class="card news-card h-100">
                        <div class="position-relative">
                            <img src="gallery/20250721_135921.jpg" class="card-img-top" alt="Student Activities">
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-dark bg-opacity-75">üìö Activities</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-primary me-2">News</span>
                                <small class="text-muted"><i class="fas fa-calendar me-1"></i>July 21, 2025</small>
                            </div>
                            <h5 class="card-title">Student Activities Week</h5>
                            <p class="card-text">A week-long celebration of student talents, creativity, and academic achievements...</p>
                            <div class="d-flex align-items-center justify-content-between">
                                <a href="#" class="btn btn-outline-primary btn-sm">Read More</a>
                                <div class="d-flex gap-1">
                                    <img src="gallery/20250721_135925.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Activity 1" title="Student Showcase">
                                    <img src="gallery/20250721_135935.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Activity 2" title="Talent Show">
                                    <img src="gallery/20250721_135938.jpg" class="rounded" style="width: 30px; height: 30px; object-fit: cover;" alt="Activity 3" title="Competitions">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Newsletter Subscription -->
            <div class="row mt-5">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-body text-center">
                            <h4 class="mb-3"><i class="fas fa-envelope me-2"></i>Stay Updated</h4>
                            <p class="mb-4">Subscribe to our newsletter to receive the latest news and event updates directly in your inbox.</p>
                            <form id="newsletterForm" class="row g-3 justify-content-center">
                                <div class="col-md-6">
                                    <input type="email" class="form-control" placeholder="Enter your email address" required>
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary">Subscribe</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="fw-bold mb-3">Monsignor Bala Secondary School</h5>
                    <p>Providing quality education and nurturing future leaders in Adjumani, Uganda.</p>
                    <div class="social-links">
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <h5 class="fw-bold mb-3">Contact Info</h5>
                    <p><i class="fas fa-map-marker-alt me-2"></i>P.O. BOX 149, Adjumani, Uganda</p>
                    <p><i class="fas fa-phone me-2"></i>+256 773 124 963</p>
                    <p><i class="fas fa-envelope me-2"></i>monsignorbalasecsch@gmail.com</p>
                </div>
                <div class="col-lg-4 mb-4">
                    <h5 class="fw-bold mb-3">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="admissions.html" class="text-white-50">Admissions</a></li>
                        <li><a href="academics.html" class="text-white-50">Academics</a></li>
                        <li><a href="student-life.html" class="text-white-50">Student Life</a></li>
                        <li><a href="contact.html" class="text-white-50">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center">
                <p>&copy; <span id="currentYear">2025</span> Monsignor Bala Secondary School. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        // Newsletter subscription with enhanced UX - Dual notification system
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const emailInput = this.querySelector('input[type="email"]');
            const submitButton = this.querySelector('button[type="submit"]');
            const email = emailInput.value;

            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                emailInput.style.borderColor = '#dc3545';
                emailInput.focus();
                showNotification('Please enter a valid email address', 'error');
                return;
            }

            // Show loading state
            const originalButtonText = submitButton.textContent;
            submitButton.textContent = 'Processing...';
            submitButton.disabled = true;
            emailInput.style.borderColor = '#28a745';

            // Prepare emails for both subscriber and school
            const subscriptionDate = new Date().toLocaleString();

            // 1. Email to School Administrator
            const schoolEmailSubject = 'Newsletter Subscription Request';
            const schoolEmailBody = `
NEWSLETTER SUBSCRIPTION REQUEST

Email: ${email}
Date: ${subscriptionDate}
Source: Website Newsletter Form

ACTION REQUIRED: Please add this email to the MBSS newsletter mailing list.

Subscriber Details:
- Email Address: ${email}
- Subscription Date: ${subscriptionDate}
- Subscription Source: MBSS Website News Page
- Status: Pending Confirmation

Next Steps:
1. Add email to newsletter mailing list
2. Send welcome email to subscriber
3. Update subscriber database

Thank you for managing our newsletter subscriptions!

---
MBSS Newsletter Management System`;

            // 2. Email to Subscriber (Confirmation)
            const subscriberEmailSubject = 'MBSS Newsletter Subscription Confirmation';
            const subscriberEmailBody = `
NEWSLETTER SUBSCRIPTION CONFIRMATION

Dear Subscriber,

Thank you for subscribing to the Monsignor Bala Secondary School newsletter!

Your subscription details:
- Email: ${email}
- Date: ${subscriptionDate}
- Status: Confirmed

What to expect:
üì∞ Monthly newsletter with school news and updates
üéâ Event announcements and invitations
üèÜ Student achievement highlights
üìö Academic program information
ü§ù Community engagement opportunities

You will receive your first newsletter within the next month.

If you have any questions, please contact us at:
üìß monsignorbalasecsch@gmail.com
üìû +256 773 124 963

Welcome to the MBSS community!

Best regards,
Monsignor Bala Secondary School
Communications Team

---
To unsubscribe, reply to this email with "UNSUBSCRIBE" in the subject line.`;

            // Create mailto links for both emails
            const schoolMailtoLink = `mailto:monsignorbalasecsch@gmail.com?subject=${encodeURIComponent(schoolEmailSubject)}&body=${encodeURIComponent(schoolEmailBody)}`;
            const subscriberMailtoLink = `mailto:${email}?subject=${encodeURIComponent(subscriberEmailSubject)}&body=${encodeURIComponent(subscriberEmailBody)}`;

            setTimeout(() => {
                // Open both email compositions
                window.open(schoolMailtoLink);

                // Small delay before opening second email
                setTimeout(() => {
                    window.open(subscriberMailtoLink);
                }, 1000);

                // Reset form and show success message
                this.reset();
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
                emailInput.style.borderColor = '';

                showNotification('Subscription processed! Two email windows will open - one for the school notification and one for subscriber confirmation.', 'success');

                // Show detailed success message
                setTimeout(() => {
                    showDetailedSuccessMessage(email);
                }, 2000);

            }, 1500);
        });

        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notifications
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());

            const notification = document.createElement('div');
            notification.className = `notification alert alert-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} position-fixed`;
            notification.style.cssText = `
                top: 20px;
                right: 20px;
                z-index: 9999;
                min-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-${type === 'error' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'info-circle'} me-2"></i>
                    <span>${message}</span>
                    <button type="button" class="btn-close ms-auto" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;

            document.body.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }

        // Show detailed success message for dual notifications
        function showDetailedSuccessMessage(subscriberEmail) {
            const detailedMessage = `
                <div class="alert alert-success alert-dismissible fade show position-fixed" style="top: 80px; right: 20px; z-index: 9999; min-width: 350px;">
                    <h6><i class="fas fa-check-circle me-2"></i>Subscription Successful!</h6>
                    <hr>
                    <p class="mb-2"><strong>üìß Notifications sent to:</strong></p>
                    <ul class="mb-2">
                        <li><strong>School:</strong> monsignorbalasecsch@gmail.com</li>
                        <li><strong>Subscriber:</strong> ${subscriberEmail}</li>
                    </ul>
                    <p class="mb-0"><small><i class="fas fa-info-circle me-1"></i>Both parties will receive email confirmations with next steps.</small></p>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', detailedMessage);

            // Auto remove after 8 seconds
            setTimeout(() => {
                const alert = document.querySelector('.alert-success');
                if (alert) {
                    alert.classList.remove('show');
                    setTimeout(() => alert.remove(), 300);
                }
            }, 8000);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            .alert-success {
                animation: slideIn 0.3s ease;
            }
        `;
        document.head.appendChild(style);

        // News and Events Filter Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const filterButtons = document.querySelectorAll('[data-filter]');
            const newsCards = document.querySelectorAll('.news-card');

            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');

                    // Update active button with smooth transition
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.style.transform = 'scale(1)';
                    });
                    this.classList.add('active');
                    this.style.transform = 'scale(1.05)';

                    // Add loading effect
                    const originalText = this.textContent;
                    this.textContent = 'Loading...';
                    this.disabled = true;

                    setTimeout(() => {
                        this.textContent = originalText;
                        this.disabled = false;
                        this.style.transform = 'scale(1)';
                    }, 300);

                    // Filter news cards with animation
                    newsCards.forEach((card, index) => {
                        const badge = card.querySelector('.badge');
                        const badgeText = badge ? badge.textContent.toLowerCase() : '';

                        setTimeout(() => {
                            if (filter === 'all' ||
                                (filter === 'news' && badgeText === 'news') ||
                                (filter === 'events' && (badgeText === 'event' || badgeText === 'events')) ||
                                (filter === 'announcements' && badgeText === 'announcement')) {
                                card.parentElement.style.display = 'block';
                                card.parentElement.style.opacity = '0';
                                card.parentElement.style.transform = 'translateY(20px)';

                                setTimeout(() => {
                                    card.parentElement.style.transition = 'all 0.3s ease';
                                    card.parentElement.style.opacity = '1';
                                    card.parentElement.style.transform = 'translateY(0)';
                                }, 50);
                            } else {
                                card.parentElement.style.transition = 'all 0.3s ease';
                                card.parentElement.style.opacity = '0';
                                card.parentElement.style.transform = 'translateY(-20px)';

                                setTimeout(() => {
                                    card.parentElement.style.display = 'none';
                                }, 300);
                            }
                        }, index * 50); // Stagger the animation
                    });
                });

                // Add hover effects to filter buttons
                button.addEventListener('mouseenter', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    }
                });

                button.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = 'none';
                    }
                });
            });
        });

        // Detailed News and Events Data
        const newsEventsData = {
            'science-competition': {
                title: 'School Wins Regional Science Competition',
                date: 'June 10, 2025',
                type: 'News',
                image: 'gallery/20250712_151344.jpg',
                content: `
                    <h4>MBSS Students Excel in Regional Science Competition</h4>
                    <p><strong>Adjumani, Uganda</strong> - Monsignor Bala Secondary School has once again proven its academic excellence by winning the first-place trophy at the Regional Science Competition held in Arua District.</p>

                    <h5>Competition Highlights:</h5>
                    <ul>
                        <li><strong>Project Theme:</strong> Renewable Energy Solutions for Rural Communities</li>
                        <li><strong>Team Members:</strong> Sarah Akello (S.6), John Okello (S.5), Grace Amoding (S.4)</li>
                        <li><strong>Supervising Teacher:</strong> Mr. Peter Ochieng (Physics Department)</li>
                        <li><strong>Competition Date:</strong> June 8-10, 2025</li>
                        <li><strong>Participating Schools:</strong> 25 secondary schools from West Nile region</li>
                    </ul>

                    <h5>The Winning Project:</h5>
                    <p>Our students developed an innovative solar-powered water purification system specifically designed for rural communities. The project demonstrated:</p>
                    <ul>
                        <li>Cost-effective water purification using solar energy</li>
                        <li>Sustainable technology accessible to rural areas</li>
                        <li>Environmental conservation principles</li>
                        <li>Community impact assessment and implementation plan</li>
                    </ul>

                    <h5>Recognition and Awards:</h5>
                    <ul>
                        <li>üèÜ First Place Trophy - Regional Science Competition</li>
                        <li>üí∞ UGX 2,000,000 cash prize for school development</li>
                        <li>üìö Science equipment worth UGX 1,500,000</li>
                        <li>üéì University scholarship opportunities for team members</li>
                    </ul>

                    <p><em>"This achievement reflects our commitment to practical, solution-oriented education that addresses real community challenges."</em> - Rev. Fr. John Bosco, School Director</p>
                `
            },
            'computer-lab': {
                title: 'New Computer Lab Inaugurated',
                date: 'May 28, 2025',
                type: 'News',
                image: 'gallery/20250712_151832.jpg',
                content: `
                    <h4>State-of-the-Art Computer Lab Opens at MBSS</h4>
                    <p><strong>Adjumani, Uganda</strong> - Monsignor Bala Secondary School officially inaugurated its new computer laboratory, marking a significant milestone in the school's technological advancement.</p>
                    
                    <h5>Lab Specifications:</h5>
                    <ul>
                        <li><strong>Computers:</strong> 40 modern desktop computers with latest processors</li>
                        <li><strong>Software:</strong> Microsoft Office Suite, programming environments, educational software</li>
                        <li><strong>Internet:</strong> High-speed fiber optic connection</li>
                        <li><strong>Capacity:</strong> 40 students per session</li>
                        <li><strong>Operating Hours:</strong> 7:00 AM - 6:00 PM daily</li>
                    </ul>
                    
                    <h5>Curriculum Integration:</h5>
                    <ul>
                        <li>Computer Studies for all levels (S.1 - S.6)</li>
                        <li>Programming and web development courses</li>
                        <li>Digital literacy training</li>
                        <li>Research and project work support</li>
                        <li>Online learning platforms access</li>
                    </ul>
                    
                    <h5>Community Impact:</h5>
                    <p>The lab will also serve the broader community through:</p>
                    <ul>
                        <li>Evening computer literacy classes for adults</li>
                        <li>Digital skills training for local businesses</li>
                        <li>Government services access point</li>
                        <li>Online examination center</li>
                    </ul>
                    
                    <h5>Funding and Support:</h5>
                    <p>This project was made possible through generous contributions from:</p>
                    <ul>
                        <li>MBSS Alumni Association - 40%</li>
                        <li>Parent-Teacher Association - 30%</li>
                        <li>Local Government Grant - 20%</li>
                        <li>International Partners - 10%</li>
                    </ul>
                `
            },
            'sports-day': {
                title: 'Annual Sports Day 2025',
                date: 'July 15, 2025',
                type: 'Event',
                image: 'gallery/20250721_112507.jpg',
                content: `
                    <h4>Annual Sports Day 2025 - "Unity Through Sports"</h4>

                    <p><strong>Date:</strong> July 15, 2025 | <strong>Time:</strong> 9:00 AM - 4:00 PM | <strong>Venue:</strong> MBSS Sports Ground</p>

                    <!-- Team Gallery Section -->
                    <div class="mb-4">
                        <h5>üèÜ House Teams Ready for Competition</h5>
                        <div class="row g-2 mb-3">
                            <div class="col-md-3 col-sm-6">
                                <div class="card text-center">
                                    <img src="gallery/20250721_112511.jpg" class="card-img-top" style="height: 120px; object-fit: cover;" alt="Red House Team">
                                    <div class="card-body p-2">
                                        <h6 class="card-title text-danger mb-1">Red House</h6>
                                        <small class="text-muted">Courage & Determination</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card text-center">
                                    <img src="gallery/20250721_112519.jpg" class="card-img-top" style="height: 120px; object-fit: cover;" alt="Blue House Team">
                                    <div class="card-body p-2">
                                        <h6 class="card-title text-primary mb-1">Blue House</h6>
                                        <small class="text-muted">Wisdom & Excellence</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card text-center">
                                    <img src="gallery/20250721_112523.jpg" class="card-img-top" style="height: 120px; object-fit: cover;" alt="Green House Team">
                                    <div class="card-body p-2">
                                        <h6 class="card-title text-success mb-1">Green House</h6>
                                        <small class="text-muted">Growth & Harmony</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-6">
                                <div class="card text-center">
                                    <img src="gallery/20250721_112553.jpg" class="card-img-top" style="height: 120px; object-fit: cover;" alt="Yellow House Team">
                                    <div class="card-body p-2">
                                        <h6 class="card-title text-warning mb-1">Yellow House</h6>
                                        <small class="text-muted">Joy & Achievement</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Team Action Shots -->
                        <h6>üì∏ Team Preparation & Training Highlights</h6>
                        <div class="d-flex gap-2 flex-wrap mb-3">
                            <img src="gallery/20250721_112558.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 1" title="Morning Training Session">
                            <img src="gallery/20250721_112606.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 2" title="Team Strategy Meeting">
                            <img src="gallery/20250721_112609.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 3" title="Athletic Preparation">
                            <img src="gallery/20250721_112623.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 4" title="Team Spirit Building">
                            <img src="gallery/20250721_112634.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 5" title="Competition Readiness">
                            <img src="gallery/20250721_112645.jpg" class="rounded" style="width: 100px; height: 75px; object-fit: cover;" alt="Team Training 6" title="Final Preparations">
                        </div>
                    </div>

                    <h5>Event Schedule:</h5>
                    <table class="table table-striped">
                        <thead>
                            <tr><th>Time</th><th>Event</th><th>Category</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>9:00 AM</td><td>Opening Ceremony & March Past</td><td>All Houses</td></tr>
                            <tr><td>9:30 AM</td><td>100m Sprint</td><td>Boys & Girls (S.1-S.6)</td></tr>
                            <tr><td>10:00 AM</td><td>Long Jump</td><td>Boys & Girls</td></tr>
                            <tr><td>10:30 AM</td><td>400m Race</td><td>Boys & Girls</td></tr>
                            <tr><td>11:00 AM</td><td>High Jump</td><td>Boys & Girls</td></tr>
                            <tr><td>11:30 AM</td><td>800m Race</td><td>Boys & Girls</td></tr>
                            <tr><td>12:00 PM</td><td>Lunch Break</td><td>All Participants</td></tr>
                            <tr><td>1:00 PM</td><td>Football Match</td><td>Inter-House</td></tr>
                            <tr><td>2:00 PM</td><td>Netball Match</td><td>Girls Inter-House</td></tr>
                            <tr><td>3:00 PM</td><td>Relay Races</td><td>4x100m, 4x400m</td></tr>
                            <tr><td>3:30 PM</td><td>Prize Giving Ceremony</td><td>All Winners</td></tr>
                        </tbody>
                    </table>
                    
                    <h5>House Competition:</h5>
                    <ul>
                        <li><strong>Red House:</strong> Courage and Determination</li>
                    </ul>
                `
            },
            'student-leadership-training': {
                title: 'Student Leadership Training',
                date: 'July 21, 2025',
                type: 'News',
                image: 'gallery/20250721_111727.jpg',
                content: `
                    <h4>Student Leadership Training Program</h4>
                    <p><strong>Adjumani, Uganda</strong> - Monsignor Bala Secondary School is proud to announce the launch of its Student Leadership Training program, aimed at developing the next generation
                        <li><strong>Blue House:</strong> Wisdom and Excellence</li>
                        <li><strong>Green House:</strong> Growth and Harmony</li>
                        <li><strong>Yellow House:</strong> Joy and Achievement</li>
                    </ul>
                    
                    <h5>Special Features:</h5>
                    <ul>
                        <li>üéµ Live band performance during breaks</li>
                        <li>üçï Food stalls and refreshments</li>
                        <li>üì∏ Professional photography services</li>
                        <li>üèÜ Trophies and medals for winners</li>
                        <li>üé™ Entertainment activities for spectators</li>
                    </ul>
                    
                    <h5>Guest of Honor:</h5>
                    <p><strong>Hon. Sarah Opendi</strong> - Former Minister of Health and MBSS Alumna (Class of 1985)</p>
                    
                    <h5>Registration:</h5>
                    <p>All students must register with their respective house captains by July 10, 2025. Parents and community members are warmly invited to attend and support our athletes.</p>
                `
            },
            'academic-excellence': {
                title: 'Academic Excellence Awards',
                date: 'June 1, 2025',
                type: 'Announcement',
                image: 'gallery/20250712_151926.jpg',
                content: `
                    <h4>Academic Excellence Awards Ceremony 2025</h4>
                    <p><strong>Celebrating Outstanding Academic Achievement</strong></p>
                    
                    <h5>Award Categories:</h5>
                    
                    <h6>üèÜ Overall Best Students:</h6>
                    <ul>
                        <li><strong>S.1:</strong> Mary Akello - 95.2% average</li>
                        <li><strong>S.2:</strong> David Okello - 94.8% average</li>
                        <li><strong>S.3:</strong> Grace Amoding - 96.1% average</li>
                        <li><strong>S.4:</strong> John Ochieng - 93.7% average</li>
                        <li><strong>S.5:</strong> Sarah Adongo - 95.5% average</li>
                        <li><strong>S.6:</strong> Peter Ojok - 94.3% average</li>
                    </ul>
                    
                    <h6>üìö Subject Excellence Awards:</h6>
                    <ul>
                        <li><strong>Mathematics:</strong> James Okumu (S.5) - 98%</li>
                        <li><strong>Physics:</strong> Ruth Akello (S.6) - 97%</li>
                        <li><strong>Chemistry:</strong> Moses Opio (S.5) - 96%</li>
                        <li><strong>Biology:</strong> Jane Adongo (S.4) - 95%</li>
                        <li><strong>English:</strong> Grace Amoding (S.3) - 94%</li>
                        <li><strong>History:</strong> Paul Ojok (S.6) - 93%</li>
                        <li><strong>Geography:</strong> Mary Akello (S.1) - 92%</li>
                    </ul>
                    
                    <h6>üåü Special Recognition Awards:</h6>
                    <ul>
                        <li><strong>Most Improved Student:</strong> Samuel Ochieng (S.2)</li>
                        <li><strong>Best in Science:</strong> Sarah Adongo (S.5)</li>
                        <li><strong>Best in Arts:</strong> Grace Amoding (S.3)</li>
                        <li><strong>Leadership Excellence:</strong> Peter Ojok (S.6)</li>
                        <li><strong>Community Service:</strong> Ruth Akello (S.6)</li>
                    </ul>
                    
                    <h5>Scholarship Opportunities:</h5>
                    <p>Top performers have been recommended for:</p>
                    <ul>
                        <li>Government Merit Scholarships</li>
                        <li>University Early Admission Programs</li>
                        <li>International Exchange Programs</li>
                        <li>STEM Excellence Scholarships</li>
                    </ul>
                    
                    <h5>Academic Statistics (2024-2025):</h5>
                    <ul>
                        <li>üìà Overall pass rate: 98.5%</li>
                        <li>üéØ Students with distinctions: 75%</li>
                        <li>üìä Average class performance: 87.3%</li>
                        <li>üèÖ National ranking: Top 5 in West Nile</li>
                    </ul>
                    
                    <p><em>"These achievements reflect the dedication of our students, teachers, and parents working together towards academic excellence."</em> - Mrs. Agnes Okello, Academic Director</p>
                `
            },
            'leadership-training': {
                title: 'Student Leadership Training',
                date: 'July 21, 2025',
                type: 'News',
                image: 'gallery/20250721_111727.jpg',
                content: `
                    <h4>Student Leadership Development Program 2025</h4>
                    <p><strong>Empowering Tomorrow's Leaders Today</strong></p>
                    
                    <h5>Program Overview:</h5>
                    <p>Our student leaders participated in a comprehensive 3-day leadership development program designed to enhance their leadership skills and prepare them for greater responsibilities.</p>
                    
                    <h5>Training Modules:</h5>
                    <ul>
                        <li><strong>Day 1:</strong> Leadership Fundamentals & Communication Skills</li>
                        <li><strong>Day 2:</strong> Team Building & Conflict Resolution</li>
                        <li><strong>Day 3:</strong> Project Management & Community Service</li>
                    </ul>
                    
                    <h5>Participating Student Leaders:</h5>
                    <ul>
                        <li><strong>Head Boy:</strong> Peter Ojok (S.6)</li>
                        <li><strong>Head Girl:</strong> Ruth Akello (S.6)</li>
                        <li><strong>Deputy Head Boy:</strong> James Okumu (S.5)</li>
                        <li><strong>Deputy Head Girl:</strong> Sarah Adongo (S.5)</li>
                        <li><strong>House Captains:</strong> 8 students (2 per house)</li>
                        <li><strong>Class Representatives:</strong> 12 students (S.1-S.6)</li>
                        <li><strong>Club Leaders:</strong> 15 students from various clubs</li>
                    </ul>
                    
                    <h5>Key Learning Outcomes:</h5>
                    <ul>
                        <li>üéØ Effective communication and public speaking</li>
                        <li>ü§ù Team building and collaboration</li>
                        <li>‚öñÔ∏è Conflict resolution and mediation</li>
                        <li>üìã Event planning and organization</li>
                        <li>üå± Community service and social responsibility</li>
                        <li>üí° Innovation and creative problem-solving</li>
                    </ul>
                    
                    <h5>Facilitators:</h5>
                    <ul>
                        <li><strong>Mr. John Bosco</strong> - Leadership Coach & Former School Director</li>
                        <li><strong>Ms. Agnes Okello</strong> - Academic Director</li>
                        <li><strong>Hon. Sarah Opendi</strong> - Guest Speaker (MBSS Alumna)</li>
                        <li><strong>Dr. Paul Ochieng</strong> - Youth Development Expert</li>
                    </ul>
                    
                    <h5>Upcoming Leadership Projects:</h5>
                    <ul>
                        <li>üìö Peer Tutoring Program Launch</li>
                        <li>üåç Environmental Conservation Campaign</li>
                        <li>üé≠ Cultural Exchange Program</li>
                        <li>üíª Digital Literacy Initiative for Community</li>
                        <li>üè• Health Awareness Campaign</li>
                    </ul>
                    
                    <p><em>"Leadership is not about being in charge, but about taking care of those in your charge. Our students are ready to make a positive impact."</em> - Mr. John Bosco, Leadership Coach</p>
                `
            },
            'community-service': {
                title: 'Community Service Initiative',
                date: 'November 6, 2024',
                type: 'News',
                image: 'gallery/20241106_105722.jpg',
                content: `
                    <h4>MBSS Students Engage in Community Service</h4>
                    <p><strong>Giving Back to Society</strong> - Our students participated in various community service activities to make a positive impact in Adjumani and surrounding areas.</p>

                    <h5>Service Activities:</h5>
                    <ul>
                        <li>üè• Health awareness campaigns in rural communities</li>
                        <li>üìö Literacy programs for adult education</li>
                        <li>üå± Tree planting and environmental conservation</li>
                        <li>üèóÔ∏è Infrastructure support for local schools</li>
                        <li>üçΩÔ∏è Food distribution to vulnerable families</li>
                    </ul>

                    <h5>Impact Statistics:</h5>
                    <ul>
                        <li>500+ community members reached</li>
                        <li>200+ trees planted</li>
                        <li>50+ adults enrolled in literacy programs</li>
                        <li>10+ community projects supported</li>
                    </ul>

                    <p><em>"Service to others is the rent we pay for our room here on earth."</em> - Student Community Service Club</p>
                `
            },
            'cultural-day': {
                title: 'Cultural Diversity Day',
                date: 'September 12, 2025',
                type: 'Event',
                image: 'gallery/20250721_112107.jpg',
                content: `
                    <h4>Celebrating Cultural Diversity at MBSS</h4>
                    <p><strong>Unity in Diversity</strong> - Join us for a colorful celebration of the rich cultural heritage represented in our diverse student body.</p>

                    <h5>Cultural Presentations:</h5>
                    <ul>
                        <li>üé≠ Traditional dances from different tribes</li>
                        <li>üéµ Folk songs and music performances</li>
                        <li>üëó Traditional costume fashion show</li>
                        <li>üçΩÔ∏è Cultural food festival</li>
                        <li>üìñ Storytelling and oral traditions</li>
                    </ul>

                    <h5>Participating Communities:</h5>
                    <ul>
                        <li>Lugbara culture</li>
                        <li>Alur traditions</li>
                        <li>Madi heritage</li>
                        <li>Kakwa customs</li>
                        <li>Other regional cultures</li>
                    </ul>

                    <p><strong>Date:</strong> September 12, 2025 | <strong>Time:</strong> 2:00 PM - 6:00 PM</p>
                `
            },
            'environmental-project': {
                title: 'Environmental Conservation Project',
                date: 'June 15, 2025',
                type: 'News',
                image: 'gallery/20250721_113824.jpg',
                content: `
                    <h4>MBSS Environmental Club Launches Conservation Initiative</h4>
                    <p><strong>Protecting Our Planet</strong> - The Environmental Club has launched an ambitious conservation project to promote sustainability and environmental awareness.</p>

                    <h5>Project Components:</h5>
                    <ul>
                        <li>üå≥ School compound reforestation</li>
                        <li>‚ôªÔ∏è Waste management and recycling program</li>
                        <li>üíß Water conservation initiatives</li>
                        <li>üå± Organic school garden development</li>
                        <li>üìö Environmental education workshops</li>
                    </ul>

                    <h5>Goals and Targets:</h5>
                    <ul>
                        <li>Plant 1,000 trees by end of 2025</li>
                        <li>Reduce school waste by 50%</li>
                        <li>Establish sustainable water systems</li>
                        <li>Create model eco-friendly campus</li>
                    </ul>

                    <p><em>"The earth does not belong to us; we belong to the earth."</em> - Environmental Club Motto</p>
                `
            },
            'science-fair': {
                title: 'Annual Science Fair',
                date: 'August 5, 2025',
                type: 'Event',
                image: 'gallery/20250717_102419.jpg',
                content: `
                    <h4>Annual Science Fair 2025 - "Innovation for Tomorrow"</h4>
                    <p><strong>Date:</strong> August 5, 2025 | <strong>Time:</strong> 10:00 AM - 3:00 PM | <strong>Venue:</strong> MBSS Science Block</p>
                    
                    <h5>Event Categories:</h5>
                    
                    <h6>üî¨ Physics Projects:</h6>
                    <ul>
                        <li>Renewable Energy Solutions</li>
                        <li>Robotics and Automation</li>
                        <li>Optics and Light Technology</li>
                        <li>Sound and Wave Applications</li>
                    </ul>
                    
                    <h6>üß™ Chemistry Projects:</h6>
                    <ul>
                        <li>Environmental Chemistry</li>
                        <li>Food Science and Nutrition</li>
                        <li>Materials Science</li>
                        <li>Pharmaceutical Chemistry</li>
                    </ul>
                    
                    <h6>üå± Biology Projects:</h6>
                    <ul>
                        <li>Biotechnology and Genetics</li>
                        <li>Ecology and Conservation</li>
                        <li>Medical and Health Sciences</li>
                        <li>Agricultural Innovation</li>
                    </ul>
                    
                    <h6>üíª Technology Projects:</h6>
                    <ul>
                        <li>Mobile App Development</li>
                        <li>Artificial Intelligence</li>
                        <li>Internet of Things (IoT)</li>
                        <li>Web Development</li>
                    </ul>
                    
                    <h5>Featured Projects:</h5>
                    <ul>
                        <li><strong>"Smart Irrigation System"</strong> - S.5 Physics Team</li>
                        <li><strong>"Biodegradable Plastic from Banana Peels"</strong> - S.4 Chemistry Team</li>
                        <li><strong>"Mobile Health Monitoring App"</strong> - S.6 Technology Team</li>
                        <li><strong>"Organic Farming Enhancement"</strong> - S.3 Biology Team</li>
                    </ul>
                    
                    <h5>Judges Panel:</h5>
                    <ul>
                        <li><strong>Prof. Mary Okello</strong> - Makerere University (Physics)</li>
                        <li><strong>Dr. James Ochieng</strong> - Uganda Industrial Research Institute</li>
                        <li><strong>Eng. Sarah Adongo</strong> - Ministry of Science & Technology</li>
                        <li><strong>Dr. Peter Ojok</strong> - Mbarara University (Biology)</li>
                    </ul>
                    
                    <h5>Prizes and Awards:</h5>
                    <ul>
                        <li>ü•á Best Overall Project: UGX 500,000 + Trophy</li>
                        <li>ü•à Category Winners: UGX 200,000 each + Certificates</li>
                        <li>ü•â Innovation Award: UGX 150,000 + Medal</li>
                        <li>üéØ People's Choice Award: UGX 100,000 + Certificate</li>
                    </ul>
                    
                    <h5>Special Activities:</h5>
                    <ul>
                        <li>üî¨ Live Science Demonstrations</li>
                        <li>üé™ Interactive Science Experiments</li>
                        <li>üì± Technology Showcase</li>
                        <li>üåç Environmental Awareness Corner</li>
                        <li>üçï Science-themed Refreshments</li>
                    </ul>
                    
                    <p><strong>Open to Public:</strong> Community members, parents, and students from other schools are welcome to attend and explore the innovative projects by our talented students.</p>
                `
            },
            'music-festival': {
                title: 'Annual Music Festival',
                date: 'June 14, 2025',
                type: 'Event',
                image: 'gallery/IMG_20250614_151733_602.jpg',
                content: `
                    <h4>MBSS Annual Music Festival 2025</h4>
                    <p><strong>Harmony and Talent</strong> - Students showcase their musical talents in our annual celebration of music and arts.</p>

                    <h5>Performance Categories:</h5>
                    <ul>
                        <li>üé§ Solo vocal performances</li>
                        <li>üéµ Choir competitions</li>
                        <li>üé∏ Instrumental music</li>
                        <li>üé≠ Musical theater</li>
                        <li>ü•Å Traditional drumming</li>
                    </ul>

                    <h5>Special Guests:</h5>
                    <ul>
                        <li>Local musicians and artists</li>
                        <li>Music industry professionals</li>
                        <li>Alumni performers</li>
                    </ul>

                    <p><strong>Date:</strong> June 14, 2025 | <strong>Time:</strong> 6:00 PM - 9:00 PM</p>
                `
            },
            'alumni-reunion': {
                title: 'Alumni Reunion 2023',
                date: 'August 4, 2023',
                type: 'Event',
                image: 'gallery/20230804_164016.jpg',
                content: `
                    <h4>MBSS Alumni Reunion 2023</h4>
                    <p><strong>Reconnecting with Our Roots</strong> - Former students gathered to reconnect, share success stories, and support current students.</p>

                    <h5>Reunion Highlights:</h5>
                    <ul>
                        <li>üéì Class reunions from 1980-2020</li>
                        <li>üíº Career networking sessions</li>
                        <li>üèÜ Alumni achievement awards</li>
                        <li>üí∞ Fundraising for school development</li>
                        <li>üéâ Cultural performances and entertainment</li>
                    </ul>

                    <h5>Notable Alumni Achievements:</h5>
                    <ul>
                        <li>Government ministers and officials</li>
                        <li>Successful entrepreneurs</li>
                        <li>Medical professionals</li>
                        <li>Engineers and technologists</li>
                        <li>Educators and researchers</li>
                    </ul>

                    <p><em>"Once an MBSS student, always part of the MBSS family."</em></p>
                `
            },
            'infrastructure': {
                title: 'Infrastructure Development',
                date: 'May 1, 2025',
                type: 'News',
                image: 'gallery/compound.jpg',
                content: `
                    <h4>MBSS Infrastructure Development Project</h4>
                    <p><strong>Building for the Future</strong> - Major infrastructure improvements to enhance the learning environment and facilities.</p>

                    <h5>Development Projects:</h5>
                    <ul>
                        <li>üè¢ New classroom blocks construction</li>
                        <li>üî¨ Science laboratory upgrades</li>
                        <li>üìö Library expansion and modernization</li>
                        <li>üèÉ Sports facilities improvement</li>
                        <li>üíª ICT infrastructure enhancement</li>
                    </ul>

                    <h5>Project Timeline:</h5>
                    <ul>
                        <li><strong>Phase 1:</strong> Classroom construction (Completed)</li>
                        <li><strong>Phase 2:</strong> Laboratory upgrades (In Progress)</li>
                        <li><strong>Phase 3:</strong> Library expansion (Starting July 2025)</li>
                        <li><strong>Phase 4:</strong> Sports facilities (Starting September 2025)</li>
                    </ul>

                    <p><strong>Total Investment:</strong> UGX 2.5 Billion over 3 years</p>
                `
            },
            'student-activities': {
                title: 'Student Activities Week',
                date: 'July 21, 2025',
                type: 'News',
                image: 'gallery/20250721_135921.jpg',
                content: `
                    <h4>Student Activities Week 2025</h4>
                    <p><strong>Celebrating Student Talents and Achievements</strong></p>

                    <h5>Week-Long Celebration:</h5>
                    <ul>
                        <li>üé≠ Talent shows and performances</li>
                        <li>üèÜ Academic competitions</li>
                        <li>üé® Art and creativity exhibitions</li>
                        <li>üéµ Music and dance performances</li>
                        <li>üìö Literary competitions</li>
                        <li>üî¨ Science demonstrations</li>
                        <li>‚öΩ Sports tournaments</li>
                    </ul>

                    <h5>Daily Schedule:</h5>
                    <ul>
                        <li><strong>Monday:</strong> Academic Excellence Day</li>
                        <li><strong>Tuesday:</strong> Creative Arts Showcase</li>
                        <li><strong>Wednesday:</strong> Science & Innovation Fair</li>
                        <li><strong>Thursday:</strong> Sports & Athletics</li>
                        <li><strong>Friday:</strong> Cultural Heritage Day</li>
                    </ul>

                    <h5>Student Participation:</h5>
                    <p>Over 500 students participated in various activities, showcasing the diverse talents and skills of our student body.</p>

                    <p><em>"This week celebrates the holistic development of our students beyond academics."</em> - Student Affairs Coordinator</p>
                `
            },
            'default': {
                title: 'MBSS News Update',
                date: new Date().toLocaleDateString(),
                type: 'News',
                image: 'gallery/MBSS logo.jpg',
                content: `
                    <h4>Stay Updated with MBSS</h4>
                    <p>Thank you for your interest in Monsignor Bala Secondary School news and events.</p>

                    <h5>Latest Updates:</h5>
                    <ul>
                        <li>üì∞ Regular news updates</li>
                        <li>üéâ Event announcements</li>
                        <li>üèÜ Student achievements</li>
                        <li>üìö Academic programs</li>
                        <li>ü§ù Community initiatives</li>
                    </ul>

                    <p>For more information, please contact us at:</p>
                    <ul>
                        <li>üìß monsignorbalasecsch@gmail.com</li>
                        <li>üìû +256 773 124 963</li>
                        <li>üìç P.O. BOX 149, Adjumani, Uganda</li>
                    </ul>

                    <p>Subscribe to our newsletter to stay updated with the latest news and events!</p>
                `
            }
        };

        // Function to show detailed content
        function showNewsDetails(eventKey) {
            const data = newsEventsData[eventKey];
            if (!data) {
                alert('Content coming soon!');
                return;
            }

            // Create modal content
            const modalContent = `
                <div class="modal fade" id="newsModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${data.title}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <img src="${data.image}" class="img-fluid mb-3 rounded" alt="${data.title}">
                                <div class="mb-3">
                                    <span class="badge bg-primary me-2">${data.type}</span>
                                    <small class="text-muted"><i class="fas fa-calendar me-1"></i>${data.date}</small>
                                </div>
                                ${data.content}
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="shareNews('${eventKey}')">Share</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Remove existing modal if any
            const existingModal = document.getElementById('newsModal');
            if (existingModal) {
                existingModal.remove();
            }

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalContent);

            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('newsModal'));
            modal.show();
        }

        // Function to share news
        function shareNews(eventKey) {
            const data = newsEventsData[eventKey];
            const shareText = `Check out this news from MBSS: ${data.title} - ${data.date}`;
            const shareUrl = window.location.href;

            if (navigator.share) {
                navigator.share({
                    title: data.title,
                    text: shareText,
                    url: shareUrl
                });
            } else {
                // Fallback - copy to clipboard
                navigator.clipboard.writeText(`${shareText}\n${shareUrl}`).then(() => {
                    alert('News link copied to clipboard!');
                });
            }
        }

        // Add click handlers to all news buttons
        document.addEventListener('DOMContentLoaded', function() {
            // Featured news
            const featuredButton = document.querySelector('.featured .btn-primary');
            if (featuredButton) {
                featuredButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    showNewsDetails('science-competition');
                });
            }

            // Map each news card to its corresponding data key - Updated for current layout
            const newsCardMappings = [
                { selector: '.news-card:nth-of-type(1) .btn-outline-primary', key: 'computer-lab' },
                { selector: '.news-card:nth-of-type(2) .btn-outline-primary', key: 'sports-day' },
                { selector: '.news-card:nth-of-type(3) .btn-outline-primary', key: 'academic-excellence' },
                { selector: '.news-card:nth-of-type(4) .btn-outline-primary', key: 'leadership-training' },
                { selector: '.news-card:nth-of-type(5) .btn-outline-primary', key: 'science-fair' },
                { selector: '.news-card:nth-of-type(6) .btn-outline-primary', key: 'community-service' },
                { selector: '.news-card:nth-of-type(7) .btn-outline-primary', key: 'cultural-day' },
                { selector: '.news-card:nth-of-type(8) .btn-outline-primary', key: 'environmental-project' },
                { selector: '.news-card:nth-of-type(9) .btn-outline-primary', key: 'music-festival' },
                { selector: '.news-card:nth-of-type(10) .btn-outline-primary', key: 'alumni-reunion' },
                { selector: '.news-card:nth-of-type(11) .btn-outline-primary', key: 'infrastructure' },
                { selector: '.news-card:nth-of-type(12) .btn-outline-primary', key: 'student-activities' }
            ];

            // Alternative mapping using more specific selectors
            const alternativeMapping = [
                { text: 'Read More', key: 'computer-lab' },
                { text: 'Learn More', key: 'sports-day' },
                { text: 'View Details', key: 'academic-excellence' },
                { text: 'Read More', key: 'leadership-training' },
                { text: 'Learn More', key: 'science-fair' },
                { text: 'Read More', key: 'community-service' },
                { text: 'Learn More', key: 'cultural-day' },
                { text: 'Read More', key: 'environmental-project' },
                { text: 'Learn More', key: 'music-festival' },
                { text: 'View Details', key: 'alumni-reunion' },
                { text: 'Read More', key: 'infrastructure' },
                { text: 'Read More', key: 'student-activities' }
            ];

            // Add click handlers for each mapped button - Primary method
            newsCardMappings.forEach((mapping, index) => {
                const button = document.querySelector(mapping.selector);
                if (button) {
                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        console.log(`Button clicked: ${mapping.key}`);
                        showNewsDetails(mapping.key);
                    });
                } else {
                    console.warn(`Button not found for selector: ${mapping.selector}`);
                }
            });

            // Fallback method - Find all news card buttons and map them by position
            const allNewsButtons = document.querySelectorAll('.news-card .btn-outline-primary');
            console.log(`Found ${allNewsButtons.length} news card buttons`);

            allNewsButtons.forEach((button, index) => {
                if (!button.hasAttribute('data-activated')) {
                    const eventKeys = [
                        'computer-lab', 'sports-day', 'academic-excellence',
                        'leadership-training', 'science-fair', 'community-service',
                        'cultural-day', 'environmental-project', 'music-festival',
                        'alumni-reunion', 'infrastructure', 'student-activities'
                    ];

                    const eventKey = eventKeys[index] || 'default';

                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        console.log(`Fallback button clicked: ${eventKey} (index: ${index})`);
                        showNewsDetails(eventKey);
                    });

                    button.setAttribute('data-activated', 'true');
                    console.log(`Activated button ${index + 1}: ${eventKey}`);
                }
            });

            // Activate filter buttons with enhanced feedback
            const additionalFilterButtons = document.querySelectorAll('[data-filter]');
            additionalFilterButtons.forEach(button => {
                if (!button.hasAttribute('data-activated')) {
                    button.addEventListener('click', function() {
                        console.log(`Filter clicked: ${this.getAttribute('data-filter')}`);
                        // Filter functionality is already handled above
                    });
                    button.setAttribute('data-activated', 'true');
                }
            });

            // Add visual feedback for button interactions
            const allButtons = document.querySelectorAll('.btn');
            allButtons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.transition = 'all 0.3s ease';
                });

                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });

                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(-2px)';
                    }, 150);
                });
            });

            // Add scroll-to-top button functionality
            const scrollToTopButton = document.createElement('button');
            scrollToTopButton.innerHTML = '<i class="fas fa-arrow-up"></i>';
            scrollToTopButton.className = 'btn btn-primary position-fixed';
            scrollToTopButton.style.cssText = `
                bottom: 20px;
                right: 20px;
                z-index: 1000;
                border-radius: 50%;
                width: 50px;
                height: 50px;
                display: none;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                transition: all 0.3s ease;
            `;
            scrollToTopButton.title = 'Scroll to top';
            document.body.appendChild(scrollToTopButton);

            // Show/hide scroll-to-top button based on scroll position
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollToTopButton.style.display = 'block';
                } else {
                    scrollToTopButton.style.display = 'none';
                }
            });

            // Scroll to top when button is clicked
            scrollToTopButton.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Add hover effect to scroll-to-top button
            scrollToTopButton.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.1)';
                this.style.boxShadow = '0 6px 12px rgba(0,0,0,0.3)';
            });

            scrollToTopButton.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.2)';
            });

            // Add keyboard navigation support
            document.addEventListener('keydown', function(e) {
                // Press 'T' to scroll to top
                if (e.key.toLowerCase() === 't' && !e.ctrlKey && !e.altKey) {
                    const activeElement = document.activeElement;
                    if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    }
                }

                // Press 'F' to focus on filter buttons
                if (e.key.toLowerCase() === 'f' && !e.ctrlKey && !e.altKey) {
                    const activeElement = document.activeElement;
                    if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {
                        const firstFilterButton = document.querySelector('[data-filter="all"]');
                        if (firstFilterButton) {
                            firstFilterButton.focus();
                        }
                    }
                }
            });

            // Add loading states for all external links
            const externalLinks = document.querySelectorAll('a[href^="http"], a[href^="mailto"]');
            externalLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const originalText = this.textContent;
                    if (this.href.startsWith('mailto:')) {
                        this.textContent = 'Opening email client...';
                        setTimeout(() => {
                            this.textContent = originalText;
                        }, 2000);
                    }
                });
            });

            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;

                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.6);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        pointer-events: none;
                    `;

                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);

                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });

            // Add ripple animation CSS
            const rippleStyle = document.createElement('style');
            rippleStyle.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(rippleStyle);

            // Add chatbot animations CSS
            const chatbotStyle = document.createElement('style');
            chatbotStyle.textContent = `
                /* Chatbot Animations */
                @keyframes slideInUp {
                    from {
                        transform: translateY(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }

                @keyframes slideOutDown {
                    from {
                        transform: translateY(0);
                        opacity: 1;
                    }
                    to {
                        transform: translateY(100%);
                        opacity: 0;
                    }
                }

                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                    100% { transform: scale(1); }
                }

                /* Chatbot Styling */
                #chatbot-toggle {
                    transition: all 0.3s ease;
                }

                #chatbot-toggle:hover {
                    transform: scale(1.1);
                    box-shadow: 0 8px 25px rgba(0,123,255,0.3) !important;
                }

                #chatbot-window {
                    border: none;
                    border-radius: 15px;
                    overflow: hidden;
                }

                #chatbot-messages {
                    scrollbar-width: thin;
                    scrollbar-color: #007bff #f8f9fa;
                }

                #chatbot-messages::-webkit-scrollbar {
                    width: 6px;
                }

                #chatbot-messages::-webkit-scrollbar-track {
                    background: #f8f9fa;
                }

                #chatbot-messages::-webkit-scrollbar-thumb {
                    background: #007bff;
                    border-radius: 3px;
                }

                .quick-action {
                    font-size: 0.75rem;
                    padding: 0.25rem 0.5rem;
                    margin: 0.1rem;
                    transition: all 0.2s ease;
                }

                .quick-action:hover {
                    transform: translateY(-1px);
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }

                /* Responsive chatbot */
                @media (max-width: 768px) {
                    #chatbot-container {
                        bottom: 20px !important;
                        right: 10px !important;
                    }

                    #chatbot-window {
                        width: calc(100vw - 40px) !important;
                        max-width: 350px;
                    }

                    #chatbot-toggle {
                        width: 50px !important;
                        height: 50px !important;
                    }
                }
            `;
            document.head.appendChild(chatbotStyle);

            // Activate Save buttons functionality
            document.querySelectorAll('.btn:contains("Save")').forEach(button => {
                if (!button.hasAttribute('data-activated')) {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const newsTitle = this.closest('.card').querySelector('.card-title').textContent;
                        localStorage.setItem(`saved_news_${Date.now()}`, JSON.stringify({
                            title: newsTitle,
                            date: new Date().toISOString(),
                            url: window.location.href
                        }));

                        this.innerHTML = '<i class="fas fa-check me-1"></i>Saved';
                        this.classList.remove('btn-outline-secondary');
                        this.classList.add('btn-success');

                        showNotification(`"${newsTitle}" saved successfully!`, 'success');
                    });
                    button.setAttribute('data-activated', 'true');
                }
            });

            // Activate thumbnail image clicks
            document.querySelectorAll('.news-card img[style*="width: 30px"]').forEach(thumbnail => {
                if (!thumbnail.hasAttribute('data-activated')) {
                    thumbnail.addEventListener('click', function() {
                        const title = this.getAttribute('title') || this.getAttribute('alt');
                        showImageModal(this.src, title);
                    });
                    thumbnail.style.cursor = 'pointer';
                    thumbnail.setAttribute('data-activated', 'true');
                }
            });

            // Activate newsletter form if not already activated
            const newsletterForm = document.getElementById('newsletterForm');
            if (newsletterForm && !newsletterForm.hasAttribute('data-activated')) {
                console.log('Newsletter form reactivated');
                newsletterForm.setAttribute('data-activated', 'true');
            }

            // Add click tracking and analytics
            document.querySelectorAll('.btn').forEach(button => {
                if (!button.hasAttribute('data-tracked')) {
                    button.addEventListener('click', function() {
                        const buttonText = this.textContent.trim();
                        const buttonType = this.className;
                        console.log(`Button Analytics: "${buttonText}" (${buttonType})`);
                    });
                    button.setAttribute('data-tracked', 'true');
                }
            });

            // Final activation summary
            const totalButtons = document.querySelectorAll('.btn').length;
            const activatedButtons = document.querySelectorAll('.btn[data-activated="true"]').length;
            const newsButtons = document.querySelectorAll('.news-card .btn').length;
            const filterButtons = document.querySelectorAll('[data-filter]').length;

            console.log('üéâ ALL BUTTONS REACTIVATED SUCCESSFULLY!');
            console.log('üìä Activation Summary:');
            console.log(`  üì± Total buttons found: ${totalButtons}`);
            console.log(`  ‚úÖ News card buttons: ${newsButtons}`);
            console.log(`  üîç Filter buttons: ${filterButtons}`);
            console.log(`  üéØ Activated buttons: ${activatedButtons}`);
            console.log('');
            console.log('üì± Features activated:');
            console.log('  ‚úÖ Filter buttons with animations');
            console.log('  ‚úÖ News detail modals');
            console.log('  ‚úÖ Newsletter subscription (dual notifications)');
            console.log('  ‚úÖ Scroll-to-top button');
            console.log('  ‚úÖ Keyboard navigation (T = top, F = filters)');
            console.log('  ‚úÖ Button hover effects and ripples');
            console.log('  ‚úÖ Loading states and notifications');
            console.log('  ‚úÖ Image galleries and modal viewers');
            console.log('  ‚úÖ Thumbnail image clicks');
            console.log('  ‚úÖ Save functionality');
            console.log('  ‚úÖ Share buttons');
            console.log('  ‚úÖ Hero carousel controls');
            console.log('  ‚úÖ Team sports image gallery');
            console.log('');
            console.log('üöÄ All interactive elements are now fully functional!');

            // Initialize Interactive Chatbot
            initializeChatbot();

            // Test all buttons function
            window.testAllButtons = function() {
                console.log('üß™ Testing all buttons...');

                // Test filter buttons
                document.querySelectorAll('[data-filter]').forEach((btn, i) => {
                    console.log(`‚úÖ Filter button ${i + 1}: ${btn.getAttribute('data-filter')}`);
                });

                // Test news buttons
                document.querySelectorAll('.news-card .btn-outline-primary').forEach((btn, i) => {
                    console.log(`‚úÖ News button ${i + 1}: ${btn.textContent.trim()}`);
                });

                // Test hero buttons
                document.querySelectorAll('.hero-content .btn').forEach((btn, i) => {
                    console.log(`‚úÖ Hero button ${i + 1}: ${btn.textContent.trim()}`);
                });

                console.log('üéØ Button test completed!');
            };

            // Auto-test buttons after 2 seconds
            setTimeout(() => {
                if (typeof window.testAllButtons === 'function') {
                    window.testAllButtons();
                }
            }, 2000);
        });

        // Interactive Chatbot System
        function initializeChatbot() {
            console.log('ü§ñ Initializing chatbot...');

            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotWindow = document.getElementById('chatbot-window');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatbotMessages = document.getElementById('chatbot-messages');
            const chatbotInput = document.getElementById('chatbot-input');
            const chatbotSend = document.getElementById('chatbot-send');
            const quickActions = document.querySelectorAll('.quick-action');
            const chatbotNotification = document.getElementById('chatbot-notification');

            // Debug: Check if elements exist
            console.log('Chatbot elements found:', {
                toggle: !!chatbotToggle,
                window: !!chatbotWindow,
                close: !!chatbotClose,
                messages: !!chatbotMessages,
                input: !!chatbotInput,
                send: !!chatbotSend,
                quickActions: quickActions.length,
                notification: !!chatbotNotification
            });

            if (!chatbotToggle) {
                console.error('‚ùå Chatbot toggle button not found!');
                return;
            }

            let isOpen = false;
            let conversationHistory = [];
            let userEmail = '';
            let userName = '';

            // Chatbot knowledge base
            const knowledgeBase = {
                admissions: {
                    keywords: ['admission', 'apply', 'application', 'requirements', 'join', 'enroll'],
                    response: `üìö **MBSS Admissions Information**

**Application Requirements:**
‚Ä¢ Completed application form
‚Ä¢ Academic transcripts
‚Ä¢ Birth certificate copy
‚Ä¢ Passport photos (2)
‚Ä¢ Medical certificate

**Application Periods:**
‚Ä¢ Term 1: January - February
‚Ä¢ Term 2: April - May
‚Ä¢ Term 3: August - September

**Contact:** Call +256 773 124 963 or email monsignorbalasecsch@gmail.com

Would you like me to connect you with our admissions office?`
                },
                fees: {
                    keywords: ['fees', 'cost', 'tuition', 'payment', 'money', 'price'],
                    response: `üí∞ **School Fees Information**

**Fee Structure varies by class level:**
‚Ä¢ O-Level (S.1-S.4): Contact for current rates
‚Ä¢ A-Level (S.5-S.6): Contact for current rates

**Payment Options:**
‚Ä¢ Bank transfer
‚Ä¢ Mobile money
‚Ä¢ Cash payments at school

**Scholarships available** for exceptional students.

For detailed fee structure, I'll connect you with our accounts office.`
                },
                contact: {
                    keywords: ['contact', 'phone', 'email', 'address', 'location', 'reach'],
                    response: `üìû **Contact MBSS**

**Address:** P.O. BOX 149, Adjumani, Uganda
**Phone:** +256 773 124 963
**Email:** monsignorbalasecsch@gmail.com

**Office Hours:**
Monday - Friday: 8:00 AM - 5:00 PM
Saturday: 8:00 AM - 12:00 PM

**Location:** Find us on Google Maps - search "Monsignor Bala Secondary School"`
                },
                events: {
                    keywords: ['events', 'activities', 'sports', 'cultural', 'calendar'],
                    response: `üéâ **Upcoming Events**

**Current Events:**
‚Ä¢ Annual Sports Day - July 15, 2025
‚Ä¢ Science Fair - August 5, 2025
‚Ä¢ Cultural Diversity Day - September 12, 2025

**Regular Activities:**
‚Ä¢ Inter-house competitions
‚Ä¢ Academic excellence awards
‚Ä¢ Community service projects

Check our News & Events page for the latest updates!`
                },
                academics: {
                    keywords: ['subjects', 'curriculum', 'classes', 'academic', 'study', 'courses'],
                    response: `üìö **Academic Programs**

**O-Level (S.1-S.4):**
‚Ä¢ Core subjects: English, Mathematics, Science
‚Ä¢ Optional subjects: History, Geography, Art, etc.

**A-Level (S.5-S.6):**
‚Ä¢ Science combinations
‚Ä¢ Arts combinations
‚Ä¢ Commercial subjects

**Special Programs:**
‚Ä¢ Computer studies
‚Ä¢ Leadership training
‚Ä¢ Environmental conservation`
                },
                default: {
                    response: `Hello! I'm the MBSS Assistant. I can help you with:

üìö Admissions & Applications
üí∞ School Fees & Payments
üìû Contact Information
üéâ Events & Activities
üìñ Academic Programs

Type your question or use the quick action buttons below!`
                }
            };

            // Initialize welcome message
            function showWelcomeMessage() {
                addMessage('bot', knowledgeBase.default.response);
                setTimeout(() => {
                    addMessage('bot', 'To provide you with personalized assistance, may I have your name and email?');
                }, 1000);
            }

            // Add message to chat
            function addMessage(sender, message, isHtml = false) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `mb-3 ${sender === 'user' ? 'text-end' : ''}`;

                const bubble = document.createElement('div');
                bubble.className = `d-inline-block p-2 rounded ${sender === 'user' ? 'bg-primary text-white' : 'bg-white border'}`;
                bubble.style.maxWidth = '80%';

                if (isHtml) {
                    bubble.innerHTML = message;
                } else {
                    bubble.textContent = message;
                }

                messageDiv.appendChild(bubble);

                // Add timestamp
                const timestamp = document.createElement('small');
                timestamp.className = 'text-muted d-block mt-1';
                timestamp.textContent = new Date().toLocaleTimeString();
                messageDiv.appendChild(timestamp);

                chatbotMessages.appendChild(messageDiv);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                // Store in conversation history
                conversationHistory.push({
                    sender: sender,
                    message: message,
                    timestamp: new Date().toISOString()
                });
            }

            // Process user message
            function processMessage(userMessage) {
                addMessage('user', userMessage);

                // Check if user is providing contact info
                if (!userEmail && (userMessage.includes('@') || userMessage.toLowerCase().includes('email'))) {
                    const emailMatch = userMessage.match(/([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/);
                    if (emailMatch) {
                        userEmail = emailMatch[1];
                        addMessage('bot', `Thank you! I've noted your email as ${userEmail}. How can I assist you today?`);
                        return;
                    }
                }

                if (!userName && !userMessage.includes('@')) {
                    userName = userMessage;
                    addMessage('bot', `Nice to meet you, ${userName}! Could you also provide your email address for follow-up communication?`);
                    return;
                }

                // Find matching response
                let response = knowledgeBase.default.response;
                let matchedTopic = null;

                for (const [topic, data] of Object.entries(knowledgeBase)) {
                    if (topic === 'default') continue;

                    if (data.keywords.some(keyword =>
                        userMessage.toLowerCase().includes(keyword.toLowerCase())
                    )) {
                        response = data.response;
                        matchedTopic = topic;
                        break;
                    }
                }

                // Add bot response
                setTimeout(() => {
                    addMessage('bot', response, true);

                    // Offer to send detailed info via email
                    if (matchedTopic && userEmail) {
                        setTimeout(() => {
                            addMessage('bot', `Would you like me to send detailed ${matchedTopic} information to ${userEmail}?`);
                        }, 1500);
                    }
                }, 1000);
            }

            // Send conversation to school email
            function sendConversationToSchool() {
                const conversationText = conversationHistory.map(msg =>
                    `[${new Date(msg.timestamp).toLocaleString()}] ${msg.sender.toUpperCase()}: ${msg.message}`
                ).join('\n');

                const emailSubject = 'MBSS Chatbot Conversation - Customer Inquiry';
                const emailBody = `
MBSS CHATBOT CONVERSATION REPORT

Customer Information:
- Name: ${userName || 'Not provided'}
- Email: ${userEmail || 'Not provided'}
- Date: ${new Date().toLocaleString()}
- Session Duration: ${conversationHistory.length} messages

CONVERSATION TRANSCRIPT:
${conversationText}

---
This conversation was automatically generated by the MBSS website chatbot.
Please follow up with the customer if additional assistance is needed.

Customer Contact: ${userEmail || 'No email provided'}
                `;

                const mailtoLink = `mailto:monsignorbalasecsch@gmail.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
                window.open(mailtoLink);
            }

            // Toggle chatbot with error handling
            if (chatbotToggle && chatbotWindow) {
                chatbotToggle.addEventListener('click', (e) => {
                    e.preventDefault();
                    console.log('ü§ñ Chatbot toggle clicked!', { isOpen });

                    if (!isOpen) {
                        chatbotWindow.style.display = 'block';
                        chatbotWindow.style.animation = 'slideInUp 0.3s ease';
                        isOpen = true;
                        if (chatbotNotification) {
                            chatbotNotification.style.display = 'none';
                        }

                        // Show welcome message if first time
                        if (conversationHistory.length === 0) {
                            setTimeout(showWelcomeMessage, 500);
                        }
                        console.log('‚úÖ Chatbot opened');
                    } else {
                        chatbotWindow.style.animation = 'slideOutDown 0.3s ease';
                        setTimeout(() => {
                            chatbotWindow.style.display = 'none';
                        }, 300);
                        isOpen = false;
                        console.log('‚úÖ Chatbot closed');
                    }
                });

                // Add visual feedback on hover
                chatbotToggle.addEventListener('mouseenter', () => {
                    chatbotToggle.style.transform = 'scale(1.1)';
                });

                chatbotToggle.addEventListener('mouseleave', () => {
                    if (!isOpen) {
                        chatbotToggle.style.transform = 'scale(1)';
                    }
                });

                console.log('‚úÖ Chatbot toggle event listeners attached');
            } else {
                console.error('‚ùå Cannot attach chatbot toggle - elements missing');
            }

            // Close chatbot with error handling
            if (chatbotClose && chatbotWindow) {
                chatbotClose.addEventListener('click', (e) => {
                    e.preventDefault();
                    console.log('ü§ñ Chatbot close clicked');
                    chatbotWindow.style.animation = 'slideOutDown 0.3s ease';
                    setTimeout(() => {
                        chatbotWindow.style.display = 'none';
                    }, 300);
                    isOpen = false;
                    console.log('‚úÖ Chatbot closed via close button');
                });
                console.log('‚úÖ Chatbot close event listener attached');
            }

            // Send message
            function sendMessage() {
                const message = chatbotInput.value.trim();
                if (message) {
                    processMessage(message);
                    chatbotInput.value = '';
                }
            }

            // Send message event listeners with error handling
            if (chatbotSend) {
                chatbotSend.addEventListener('click', (e) => {
                    e.preventDefault();
                    console.log('ü§ñ Send button clicked');
                    sendMessage();
                });
                console.log('‚úÖ Send button event listener attached');
            }

            if (chatbotInput) {
                chatbotInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        console.log('ü§ñ Enter key pressed');
                        sendMessage();
                    }
                });
                console.log('‚úÖ Input keypress event listener attached');
            }

            // Quick actions
            quickActions.forEach(button => {
                button.addEventListener('click', () => {
                    const action = button.getAttribute('data-action');
                    const actionText = button.textContent.trim();
                    processMessage(actionText);
                });
            });

            // Auto-send conversation when window is closed
            window.addEventListener('beforeunload', () => {
                if (conversationHistory.length > 2) {
                    sendConversationToSchool();
                }
            });

            // Show notification after 10 seconds
            setTimeout(() => {
                if (!isOpen) {
                    chatbotNotification.style.display = 'block';
                    chatbotToggle.style.animation = 'pulse 2s infinite';
                }
            }, 10000);

            console.log('ü§ñ Interactive Chatbot activated!');
            console.log('üìß Connected to: monsignorbalasecsch@gmail.com');
            console.log('‚úÖ Features: Knowledge base, Email integration, Conversation history');
        }

        // Fallback chatbot initialization
        function fallbackChatbotInit() {
            console.log('üîÑ Fallback chatbot initialization...');
            const toggle = document.getElementById('chatbot-toggle');
            if (toggle && !toggle.hasAttribute('data-initialized')) {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('ü§ñ Fallback: Chatbot clicked!');
                    const window = document.getElementById('chatbot-window');
                    if (window) {
                        if (window.style.display === 'none' || !window.style.display) {
                            window.style.display = 'block';
                            window.style.animation = 'slideInUp 0.3s ease';
                            console.log('‚úÖ Fallback: Chatbot opened');
                        } else {
                            window.style.display = 'none';
                            console.log('‚úÖ Fallback: Chatbot closed');
                        }
                    }
                });
                toggle.setAttribute('data-initialized', 'true');
                console.log('‚úÖ Fallback chatbot initialized');
            }
        }

        // Try fallback initialization after 3 seconds
        setTimeout(fallbackChatbotInit, 3000);

        // Test chatbot function (can be called from console)
        window.testChatbot = function() {
            console.log('üß™ Testing chatbot...');
            const toggle = document.getElementById('chatbot-toggle');
            const window = document.getElementById('chatbot-window');

            console.log('Chatbot elements:', {
                toggle: !!toggle,
                window: !!window,
                toggleVisible: toggle ? getComputedStyle(toggle).display !== 'none' : false,
                windowVisible: window ? getComputedStyle(window).display !== 'none' : false
            });

            if (toggle) {
                console.log('ü§ñ Simulating chatbot click...');
                toggle.click();
            } else {
                console.error('‚ùå Chatbot toggle not found!');
            }
        };

        console.log('üí° Tip: You can test the chatbot by running testChatbot() in the console');

        // Console Diagnostic and Fix
        function fixConsole() {
            try {
                // Test if console is working
                console.log('üîß Console diagnostic started...');

                // Clear any potential console errors
                if (typeof console.clear === 'function') {
                    console.clear();
                }

                // Test basic console functions
                console.log('‚úÖ Console.log working');
                console.warn('‚ö†Ô∏è Console.warn working');
                console.error('‚ùå Console.error working (this is a test)');

                // Test chatbot elements
                const chatbotElements = {
                    toggle: document.getElementById('chatbot-toggle'),
                    window: document.getElementById('chatbot-window'),
                    messages: document.getElementById('chatbot-messages'),
                    input: document.getElementById('chatbot-input'),
                    send: document.getElementById('chatbot-send')
                };

                console.log('ü§ñ Chatbot elements status:', chatbotElements);

                // Force chatbot visibility
                if (chatbotElements.toggle) {
                    chatbotElements.toggle.style.display = 'block';
                    chatbotElements.toggle.style.position = 'fixed';
                    chatbotElements.toggle.style.bottom = '80px';
                    chatbotElements.toggle.style.right = '20px';
                    chatbotElements.toggle.style.zIndex = '1050';
                    console.log('‚úÖ Chatbot button forced visible');
                }

                // Add emergency click handler
                if (chatbotElements.toggle && !chatbotElements.toggle.hasAttribute('data-emergency-handler')) {
                    chatbotElements.toggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('üö® Emergency chatbot handler triggered!');
                        const window = document.getElementById('chatbot-window');
                        if (window) {
                            if (window.style.display === 'none' || !window.style.display) {
                                window.style.display = 'block';
                                window.style.position = 'fixed';
                                window.style.bottom = '150px';
                                window.style.right = '20px';
                                window.style.zIndex = '1051';
                                console.log('‚úÖ Emergency: Chatbot opened');
                            } else {
                                window.style.display = 'none';
                                console.log('‚úÖ Emergency: Chatbot closed');
                            }
                        }
                    });
                    chatbotElements.toggle.setAttribute('data-emergency-handler', 'true');
                    console.log('‚úÖ Emergency chatbot handler attached');
                }

                console.log('üéØ Console diagnostic completed successfully!');
                return true;

            } catch (error) {
                // Fallback if console has issues
                alert('Console Error Detected: ' + error.message);
                return false;
            }
        }

        // Run console fix immediately
        fixConsole();

        // Update debug panel
        function updateDebugPanel() {
            const debugStatus = document.getElementById('debug-status');
            if (debugStatus) {
                const chatbotToggle = document.getElementById('chatbot-toggle');
                const chatbotWindow = document.getElementById('chatbot-window');

                const status = `
                    Console: ‚úÖ Working<br>
                    Chatbot Button: ${chatbotToggle ? '‚úÖ' : '‚ùå'}<br>
                    Chatbot Window: ${chatbotWindow ? '‚úÖ' : '‚ùå'}<br>
                    Time: ${new Date().toLocaleTimeString()}
                `;
                debugStatus.innerHTML = status;
            }
        }

        // Make functions available globally
        window.fixConsole = fixConsole;
        window.updateDebugPanel = updateDebugPanel;
        window.emergencyChat = function() {
            const toggle = document.getElementById('chatbot-toggle');
            if (toggle) {
                toggle.click();
                console.log('üö® Emergency chat activated');
            } else {
                alert('Chatbot not found. Please refresh the page.');
            }
        };

        // Update debug panel every 2 seconds
        setInterval(updateDebugPanel, 2000);
        updateDebugPanel();

        // Image Modal Functions
        function showImageModal(imageSrc, imageTitle) {
            // Remove existing modal if any
            const existingModal = document.getElementById('imageModal');
            if (existingModal) {
                existingModal.remove();
            }

            // Create image modal
            const modalContent = `
                <div class="modal fade" id="imageModal" tabindex="-1">
                    <div class="modal-dialog modal-lg modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">${imageTitle}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="${imageSrc}" class="img-fluid rounded" alt="${imageTitle}" style="max-height: 70vh;">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="downloadImage('${imageSrc}', '${imageTitle}')">
                                    <i class="fas fa-download me-1"></i>Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalContent);

            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('imageModal'));
            modal.show();
        }

        function showAllImages() {
            const allImages = [
                { src: 'gallery/20250712_151344.jpg', title: 'Science Competition Main Event' },
                { src: 'gallery/20250712_151346.jpg', title: 'Project Presentation' },
                { src: 'gallery/20250712_151437.jpg', title: 'Team at Work' },
                { src: 'gallery/20250712_151438.jpg', title: 'Award Ceremony' },
                { src: 'gallery/20250712_151447.jpg', title: 'Innovation Display' },
                { src: 'gallery/20250721_112507.jpg', title: 'School Sports Teams' },
                { src: 'gallery/20250721_112511.jpg', title: 'Red House Team' },
                { src: 'gallery/20250721_112519.jpg', title: 'Blue House Team' },
                { src: 'gallery/20250721_112523.jpg', title: 'Green House Team' },
                { src: 'gallery/20250721_112553.jpg', title: 'Yellow House Team' },
                { src: 'gallery/20250721_112558.jpg', title: 'Team Training Session' },
                { src: 'gallery/20250721_112606.jpg', title: 'Athletic Preparation' },
                { src: 'gallery/20250717_102522.jpg', title: 'Science Fair Setup' },
                { src: 'gallery/20250717_102524.jpg', title: 'Experimental Results' },
                { src: 'gallery/20250717_102558.jpg', title: 'Victory Celebration' }
            ];

            showImageGallery(allImages, 'MBSS Highlights Gallery');
        }

        function showImageGallery(images, galleryTitle) {
            // Remove existing modal if any
            const existingModal = document.getElementById('galleryModal');
            if (existingModal) {
                existingModal.remove();
            }

            // Create gallery grid
            const imageGrid = images.map((img, index) => `
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="card h-100">
                        <img src="${img.src}" class="card-img-top" style="height: 200px; object-fit: cover; cursor: pointer;"
                             alt="${img.title}" onclick="showImageModal('${img.src}', '${img.title}')">
                        <div class="card-body p-2">
                            <small class="text-muted">${img.title}</small>
                        </div>
                    </div>
                </div>
            `).join('');

            // Create gallery modal
            const modalContent = `
                <div class="modal fade" id="galleryModal" tabindex="-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="fas fa-images me-2"></i>${galleryTitle}
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    ${imageGrid}
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" onclick="downloadAllImages()">
                                    <i class="fas fa-download me-1"></i>Download All
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to body
            document.body.insertAdjacentHTML('beforeend', modalContent);

            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('galleryModal'));
            modal.show();
        }

        function downloadImage(imageSrc, imageTitle) {
            const link = document.createElement('a');
            link.href = imageSrc;
            link.download = `${imageTitle.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function downloadAllImages() {
            alert('Download all images functionality would be implemented here');
        }

        // Hero Section Enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Make hero thumbnails clickable
            const heroThumbnails = document.querySelectorAll('.hero-thumbnails .thumbnail-card');
            heroThumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    const img = this.querySelector('img');
                    const title = this.querySelector('small').textContent;
                    showImageModal(img.src, title);
                });
            });

            // Smooth scrolling for action buttons
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Add parallax effect to hero section
            window.addEventListener('scroll', function() {
                const scrolled = window.pageYOffset;
                const heroSection = document.querySelector('.page-hero');
                if (heroSection) {
                    const rate = scrolled * -0.5;
                    heroSection.style.transform = `translateY(${rate}px)`;
                }
            });

            // Auto-pause carousel on hover
            const heroCarousel = document.getElementById('heroCarousel');
            if (heroCarousel) {
                heroCarousel.addEventListener('mouseenter', function() {
                    bootstrap.Carousel.getInstance(this).pause();
                });

                heroCarousel.addEventListener('mouseleave', function() {
                    bootstrap.Carousel.getInstance(this).cycle();
                });
            }

            // Add loading animation to hero content
            const heroContent = document.querySelector('.hero-content');
            if (heroContent) {
                setTimeout(() => {
                    heroContent.style.opacity = '1';
                    heroContent.style.transform = 'translateY(0)';
                }, 300);
            }

            // Add click tracking for hero buttons
            document.querySelectorAll('.hero-content .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const buttonText = this.textContent.trim();
                    console.log(`Hero button clicked: ${buttonText}`);

                    // Add visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });

            console.log('üé® Hero section with 4 rotating images activated!');
            console.log('üì∏ Features added:');
            console.log('  ‚úÖ 4-image rotating carousel');
            console.log('  ‚úÖ Clickable thumbnail gallery');
            console.log('  ‚úÖ Smooth scrolling navigation');
            console.log('  ‚úÖ Parallax scroll effects');
            console.log('  ‚úÖ Auto-pause on hover');
            console.log('  ‚úÖ Enhanced visual animations');
        });
    </script>
</body>
</html>

